#`@-правила` CSS

Автор статьи: [Geoff Graham](https://css-tricks.com/author/geoffreygrahamgmail-com/) (Май 2015)

`@-правило` — утверждение, которое содержит инструктивные указания CSS, либо
диктует манеру поведения CSS. Каждое такое утверждение начинается со знака «@»,
за которым следует одно из служебных слов, определяющих поведение CSS. Это
общий синтаксис которому следуют все `@-правила`.

## Обычные правила

Обычные правила следуют стандартному синтаксису:

    @[КЛЮЧЕВОЕ СЛОВО] (ПРАВИЛО);

### `@charset`

Это правило определяет кодировку, используемую браузером. Это очень удобно если
таблица стилей содержит символы, не входящие в [ASCII][1] (например [UTF-8][2]).
Однако, помните, что кодировка [указанная в заголовке HTTP файла][3] может
переопределить любое `@charset` правило вашей таблицы стилей.

    @charset "UTF-8";

### `@import`

Это правило содержит указание на запрос и включение внешнего файла CSS, причем
содержимое этого файла будет добавлено непосредственно в том месте, где
находится `@-правило`.

    @import 'global.css';

Принимая во внимание возросшую популярность препроцессоров CSS, которые
поддерживают правило `@import`, нужно помнить о том, что препроцессор может
трактовать правило иначе, чем это делает чистый CSS файл. Препроцессор получает
все импортируемые файлы и обрабатывает их, получая на выходе один файл CSS.
Чистый CSS обрабатывает каждый `@import` как отдельный HTTP запрос на включение
указанного в правиле файла.

### `@namespace`

Это правило особенно полезно для применения CSS в XML HTML (XHTML), с его
помощью XHTML элементы могут быть использованы в качестве селекторов CSS.

    /* Пространство имен для XHTML */
    @namespace url(http://www.w3.org/1999/xhtml);

    /* Пространство имен для SVG встроенного в XHTML */
    @namespace svg url(http://www.w3.org/2000/svg);

## Правила с вложенными элементами

Правила с вложенными элементами содержат подмножество дополнительных
утверждений, некоторые из которых могут срабатывать только в конкретной
ситуации.

    @[KEYWORD] {
      /* Вложенные утверждения */
    }

### `@document`

Это правило диктует условия для стилей, которые применяются к определенной
странице. Например, можно подставить URL и затем настроить стили для этой
конкретной страницы.
На других страницах эти стили будут проигнорированы.

    @document
      /* Устанавливает правила для конкретной страницы */
      url(http://css-tricks.com/),

      /* Устанавливает правила для страниц, чей URL начинается с … */
      url-prefix(http://css-tricks.com/snippets/),

      /* Устанавливает правила для всех страниц принадлежащих домену */
      domain(css-tricks.com),

      /* Правила для всех страниц с протоколом шифрования */
      regexp("https:.*")
    {

      /* Описание стилей */
      body { font-family: Comic Sans; }

    }

На момент написания статьи поддержка правила `@document` была довольно слабой:

| Chrome | Safari | Firefox | Opera | IE | Android | iOS
| ———— | ———— | ———— | ———— | ———— | ————|———— |
| No | No | -moz | No | No | No | No |


<table>
	<tr>
		<th>Chrome</th>
		<th>Safari</th>
		<th>Firefox</th>
		<th>Opera</th>
		<th>IE</th>
		<th>Android</th>
		<th>iOS</th>
	</tr>
	<tr>
		<td>No</td>
		<td>No</td>
		<td>-moz</td>
		<td>No</td>
		<td>No</td>
		<td>No</td>
		<td>No</td>
	</tr>
</table>


### `@font-face`

Это правило позволяет применять пользовательские шрифты на странице.
Существуют [различные уровни браузерной поддержки][4] пользовательских шрифтов,
которые можно реализовать, однако само правило прежде всего предназначено
непосредственно для создания и поддержки пользовательских шрифтов на странице.

    @font-face {
      font-family: 'MyWebFont';
      src:  url('myfont.woff2') format('woff2'),
            url('myfont.woff') format('woff');
    }

### `@keyframes`

Это правило является основой для [покадровой] [5] [анимации] [6] многих CSS
свойств, позволяя указать начальные, конечные и промежуточные метки при
анимировании элемента.

    @keyframes pulse {
      0% {
        background-color: #001f3f;
      }
      100% {
        background-color: #ff4136;
      }
    }

### `@media`

Это правило содержит условные выражения для целевых стилей в применении к
конкретным характеристикам экранов. Эти выражения могут включать, например,
размеры экрана, что может пригодиться для создания [адаптивных стилей для
различных устройств] [7]:

    /* iPhone в портретной и альбомной ориентации */
    @media only screen
      and (min-device-width: 320px)
      and (max-device-width: 480px)
      and (-webkit-min-device-pixel-ratio: 2) {

        .module { width: 100%; }

    }

или применения стилей только в печатной версии документа:

    @media print {

    }

### `@page`

Это правило определяет стили индивидуальных страниц при выдаче их на печать.
Правило содержит специальные псевдо-элементы для определения «первой»
(`:first`),а также «левой» (`:left`) и «правой» (`:right`) страниц при
печати двух страниц на листе.

    @page :first {
      margin: 1in;
    }

### `@supports`

Это правило определяет способен ли браузер поддерживать те или иные возможности,
и затем, если браузер удовлетворяет поставленным условиям, применяет указанный
для элементов стиль. Это своего рода [Modernizr][8] но нацеленный исключительно
на проверку свойств CSS.

    /* Проверка одного условия */
    @supports (display: flex) {
      .module { display: flex; }
    }

    /* Проверка нескольких условий */
    @supports (display: flex) and (-webkit-appearance: checkbox) {
      .module { display: flex; }
    }

Ну а ниже, увы и ах, реализация кросс-браузерной поддержки для правила
@supports:

| Chrome | Safari | Firefox | Opera | IE   | Android | iOS |
|————|————|————|———|———|————|——|
| 28+    | No     | 31+     | 12.1+ | Edge | 4.4+    | No  |


<table>
  <tr>
    <th>Chrome</th>
    <th>Safari</th>
    <th>Firefox</th>
    <th>Opera</th>
    <th>IE</th>
    <th>Android</th>
    <th>iOS</th>
  </tr>
  <tr>
    <td>28+</td>
    <td>No</td>
    <td>31+</td>
    <td>12.1+</td>
    <td>Edge</td>
    <td>4.4+</td>
    <td>No</td>
  </tr>
</table>

## Подводя итог

`@-правила` позволяют делать с CSS интересные и удивительные вещи. И хотя
примеры представленные здесь демонстрируют базовую функциональность, мы можем
видеть, как они могут быть  использованы для настройки стилей под самые разные
условия, позволяя создавать интерактивные сценарии с учетом действий
пользователя.

[Twitter][9] [Facebook][10] [Google+][11]

 [1]: http://www.ascii.cl/htmlcodes.htm
 [2]: http://en.wikipedia.org/wiki/UTF-8
 [3]: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta#Attributes
 [4]: https://css-tricks.com/snippets/css/using-font-face/
 [5]: https://css-tricks.com/snippets/css/keyframe-animation-syntax/
 [6]: https://css-tricks.com/almanac/properties/a/animation/
 [7]: https://css-tricks.com/snippets/css/media-queries-for-standard-devices/
 [8]: http://modernizr.com/
 [9]: https://twitter.com/intent/tweet?text=The%20At-Rules%20of%20CSS&url=https://css-tricks.com/the-at-rules-of-css/&via=real_css_tricks
 [10]: https://www.facebook.com/sharer/sharer.php?u=https://css-tricks.com/the-at-rules-of-css/
 [11]: https://plus.google.com/share?url=https://css-tricks.com/the-at-rules-of-css/